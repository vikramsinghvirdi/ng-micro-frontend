{"ast":null,"code":"import _asyncToGenerator from \"/Users/svikramjeet/microfrontend/ng-host-monorepo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX as t, AnimationStatus as n, CLARITY_MOTION_REVERSE_ANIMATION_LABEL as o, CLARITY_MOTION_FALLBACK_EASING as i, CLARITY_MOTION_FALLBACK_DURATION_IN_MS as r, CLARITY_MOTION_ENTER_LEAVE_PROPERTY as e } from \"./interfaces.js\";\nimport { LogService as s } from \"../services/log.service.js\";\nimport { ClarityMotion as u } from \"./motion.service.js\";\nimport a from \"ramda/es/clone.js\";\nimport { isCssPropertyName as c, getCssPropertyValue as f } from \"../utils/css.js\";\nimport { isSuffixedBy as l, getNumericValueFromCssSecondsStyleValue as m, isPrefixedBy as d, removePrefix as p } from \"../utils/string.js\";\nimport { queryChildFromLightOrShadowDom as h } from \"../utils/dom.js\";\nimport { allPropertiesPass as g, getMillisecondsFromSeconds as v } from \"../utils/identity.js\";\n\nfunction y(_x, _x2) {\n  return _y.apply(this, arguments);\n}\n\nfunction _y() {\n  _y = _asyncToGenerator(function* (t, n) {\n    if (!n._animations) return s.warn(n.tagName.toLocaleLowerCase() + \" is trying to animate but no animations are defined.\"), !1;\n    const o = z(n._animations, t);\n    return yield Promise.all(o.map(o => {\n      const [i, r] = o;\n      if (t.get(i) === n[i]) return !1;\n      const e = r[n[i].toString()],\n            s = n.cdsMotion,\n            [u, c] = M(e, x(s, i, n[i].toString()));\n      let f = a(c);\n      if (f.length < 1) return !1;\n      f = O(u, f, n);\n      const l = b(e, f, n);\n      return Promise.all(l).then(() => (j(e, n), !0));\n    })).then(t => t.indexOf(!0) > -1).catch(() => !1);\n  });\n  return _y.apply(this, arguments);\n}\n\nfunction w(t, o) {\n  o.getAttribute(\"_cds-animation-status\") !== n.active && (o.setAttribute(\"_cds-animation-status\", n.active), o.cdsMotionChange.emit(`${t} animation ${n.start}`));\n}\n\nfunction j(t, o) {\n  o.setAttribute(\"_cds-animation-status\", n.ready), o.cdsMotionChange.emit(`${t} animation ${n.end}`);\n}\n\nfunction O(t, n, o) {\n  const i = o.cdsMotion,\n        r = !i || \"off\" === i;\n  return S(t) && (n = C(n)), r ? B(n) : $(n = N(n, o), o);\n}\n\nfunction b(t, n, o) {\n  return n.filter(t => !t.onlyIf || g(o, t.onlyIf)).map(n => (w(t, o), new Promise(t => {\n    const i = A(o, n.target).animate(P(n.animation, o), n.options || {}),\n          r = () => {\n      t(\"animation finished\"), i.removeEventListener(\"finish\", r);\n    };\n\n    i.addEventListener(\"finish\", r);\n  })));\n}\n\nfunction A(t, n) {\n  return h(t, n) || t;\n}\n\nfunction P(t, n) {\n  return Array.isArray(t) ? R(t, n) : t;\n}\n\nfunction S(n) {\n  return l(n, t);\n}\n\nfunction C(t) {\n  return t.map(t => (t.options ? t.options.direction = o : t.options = {\n    direction: o\n  }, t));\n}\n\nfunction _(t) {\n  return t + \"-\" + o;\n}\n\nfunction x(t, n, o) {\n  if (!t || !n || void 0 === o) return \"\";\n  if (\"on\" === t || \"off\" === t) return \"\";\n  let i;\n\n  try {\n    i = JSON.parse(t);\n  } catch (t) {\n    return \"\";\n  }\n\n  return i[n] && i[n][o] || \"\";\n}\n\nfunction E(n) {\n  return S(n) ? n.slice(0, -1 * t.length) : n;\n}\n\nfunction L(t, n) {\n  return n && u.has(E(n)) ? n : t;\n}\n\nfunction M(t, n) {\n  const o = L(t, n);\n  return [o, a(u.get(E(o)))];\n}\n\nfunction N(t, n) {\n  return I(\"duration\", n, t, r, t => v(m(t)));\n}\n\nfunction $(t, n) {\n  return I(\"easing\", n, t, i);\n}\n\nfunction B(t) {\n  return t.map(t => (t.options ? (t.options.duration = 0, t.options.easing = i) : t.options = {\n    duration: 0,\n    easing: i\n  }, t));\n}\n\nfunction I(t, n, o, i, r) {\n  return o.map(o => {\n    if (o.options) {\n      if (o.options[t]) {\n        if (c(o.options[t])) {\n          const e = o.options[t];\n          let s = f(e, n);\n          s ? r && (s = r(s)) : s = i, o.options[t] = s;\n        }\n      } else o.options[t] = i;\n    } else {\n      const n = {};\n      n[t] = i, o.options = n;\n    }\n    return o;\n  });\n}\n\nfunction R(t, n) {\n  return Array.isArray(t) ? t.map(t => {\n    var o, i, r, e;\n\n    if (t && Object.prototype.hasOwnProperty.call(t, \"height\") && d((null === (o = null == t ? void 0 : t.height) || void 0 === o ? void 0 : o.toString()) || \"\", \"from:\")) {\n      const o = p((null === (i = null == t ? void 0 : t.height) || void 0 === i ? void 0 : i.toString()) || \"\", \"from:\"),\n            r = h(n, o) || null;\n      t.height = r ? r.getBoundingClientRect().height + \"px\" : \"auto\";\n    }\n\n    if (t && Object.prototype.hasOwnProperty.call(t, \"width\") && d((null === (r = null == t ? void 0 : t.width) || void 0 === r ? void 0 : r.toString()) || \"\", \"from:\")) {\n      const o = p((null === (e = null == t ? void 0 : t.width) || void 0 === e ? void 0 : e.toString()) || \"\", \"from:\"),\n            i = h(n, o) || null;\n      t.width = i ? i.getBoundingClientRect().width + \"px\" : \"auto\";\n    }\n\n    return t;\n  }) : t;\n}\n\nfunction J(t, n) {\n  if (null == t) return null;\n  let o = !0;\n  const i = {};\n  return Object.getOwnPropertyNames(t).forEach(r => {\n    n.has(r) && (i[r] = a(t[r]), o = !1);\n  }), o ? null : i;\n}\n\nfunction k(t, n) {\n  if (null == t) return [];\n  const [o, i] = t;\n  return o.length > 0 ? n ? [].concat(i, o) : [].concat(o, i) : i;\n}\n\nfunction q(t) {\n  const n = [],\n        o = [];\n  return Object.getOwnPropertyNames(t || {}).forEach(i => {\n    const r = [i, a(t[i])];\n    i === e ? n.push(r) : o.push(r);\n  }), [n, o];\n}\n\nfunction z(t, n) {\n  const o = J(t || {}, n);\n  return null === o ? [] : k(q(o), n.get(e));\n}\n\nexport { S as animationIsReversed, E as extractAnimationNameIfReversed, J as filterAnimationsByUpdatedProperties, k as flattenAndSortAnimations, M as getAnimationConfigForPropertyValue, L as getAnimationFromOverrideOrDecorator, P as getAnimationKeyframesOrPropertyIndexedFrames, b as getAnimationPromiseInstructions, A as getAnimationTarget, q as getHidingAndNonHidingPropertyAnimations, x as getInlineOverride, z as getPropertyAnimations, j as resolveAnimationEndStatus, _ as reverseAnimation, C as reverseAnimationConfig, y as runPropertyAnimations, O as setAnimationConfigOptions, N as setAnimationDuration, $ as setAnimationEasing, I as setAnimationProperty, w as setAnimationStartStatus, R as sizeDimensionKeyframes, B as zeroOutAnimationConfig }; //# sourceMappingURL=utils.js.map","map":null,"metadata":{},"sourceType":"module"}